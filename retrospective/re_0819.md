## 리뷰

### 최종 프로젝트 API 프로토타입

## 견적 비교 서비스 API 문서

## 1. 견적 평가 API

### **POST** `/estimate`

> 입력된 단일 견적서에 대해 항목별·총액 평가 결과를 반환합니다.
> 
> 
> 부품 카테고리별 시장 평균/시세 대비 가격을 분석하여 진행 권장/재견적/반려 등의 액션을 제안합니다.
> 

---

### Request

```json
{
  "car": {
    "model": "아반떼 7"
  },
  "parts": [
    {
      "code": "V130RRQPAF24",
      "name": "사이드미러",
      "value": 49000
    },
    {
      "code": "V154ATTQPA44",
      "name": "브레이크 패드",
      "value": 56000
    },
    {
      "code": "V130RRQ4267P",
      "name": "엔진 어셈블리",
      "value": 1049000
    }
  ],
  "fee": [
    {
      "name": "엔진 오일 교체",
      "value": 15000
    }
  ],
  "total": 116900
}
```

---

### Response

```json
{
  "total": 1300000,
  "one_line_review": "총액이 평균가 대비 20% 과잉 책정됐으므로 다른 정비소 방문을 권장합니다.",
  "detail": {
	  "parts": [
	    {
	      "name": "V130RRQPAF24",
	      "value": 49000,
	      "average": 45000,
	      "market_price": 50000,
	      "gap_price": 4000,
	      "gap_pct": 8.9,
	      "tag": {
	        "action": "proceed",
	        "reason": "within_market"
	      },
	      "one_line_review": "부품 V130RRQPAF24는 시장 범위 내(±8.9%)로 그대로 진행하세요."
	    },
	    {
	      "name": "V154ATTQPA44",
	      "value": 56000,
	      "average": 48000,
	      "market_price": 40000,
	      "gap_price": 8000,
	      "gap_pct": 16.7,
	      "tag": {
	        "action": "requote",
	        "reason": "over_market"
	      },
	      "one_line_review": "부품 V154ATTQPA44는 평균가 대비 16.7% 높으므로 대체 부품 확인을 권장합니다."
	    },
	    {
	      "name": "V130RRQ4267P",
	      "value": 1049000,
	      "average": 800000,
	      "market_price": 820000,
	      "gap_price": 229000,
	      "gap_pct": 28.6,
	      "tag": {
	        "action": "requote",
	        "reason": "over_market"
	      },
	      "one_line_review": "부품 V130RRQ4267P는 시장가보다 28.6% 높으므로 다른 견적 요청이 필요합니다."
	    }
	  ],
	  "fee": [
	    {
	      "name": "엔진 오일 교체",
	      "value": 15000,
	      "average": 15000,
	      "gap_price": 0,
	      "gap_pct": 0,
	      "tag": {
	        "action": "proceed",
	        "reason": "within_market"
	      },
	      "one_line_review": "공임(엔진 오일 교체)은 평균 수준으로 적정합니다."
	    }
	  ]
  }
}
```

---

## 2. 견적 비교 API

### **POST** `/compare`

> 여러 개의 견적서를 입력받아 가격·품질 점수를 산정하고, 최종적으로 추천 견적서를 반환합니다.
> 

---

### Request

```json
{
  "sheets": [
    { "id": 21312515 },
    { "id": 21312516 },
    { "id": 21312517 }
  ]
}
```

---

### Response

```json
{
  "winner": {
    "id": 21312515,
    "score": 92.4,
    "one_line_review": "견적서 21312515가 다른 견적서 대비 가격·품질 모두 합리적이므로 추천합니다."
  },
  "quotation": [
    {
      "id": 21312515,
      "price": 1500000,
      "price_score": 55,
      "quality_score": 66
    },
    {
      "id": 21312516,
      "price": 1600000,
      "price_score": 54,
      "quality_score": 40
    },
    {
      "id": 21312517,
      "price": 1300000,
      "price_score": 58,
      "quality_score": 49
    }
  ]
}

```

---

## 3. 주변 정비소 검색 API

### **GET** `/search?latitude=&longitude=`

> 사용자의 위도/경도 정보를 받아, 주변 정비소 중 리뷰 50개 이상인 곳만 필터링하여 추천합니다.
> 

---

### Request

```json
{
	"car": {
		"category": "준중형"
	},
  "latitude": 43.41108,
  "longitude": 36.34143
}
```

---

### Response

```json
{
  "winner": {
    "id": 1231425,
    "name": "에어모토",
    "score": 0.97,
    "one_line_review": "에어모토가 동종 비교에서 사용자 반응이 가장 우수해 추천합니다."
  },
  "repairshop": [
    {
      "id": 1231425,
      "name": "에어모토",
      "address": "서울특별시 강남구 강남로 1",
      "grade": 1,
      "distance": 4.4,
      "sentiment_score": 0.96
    },
    {
      "id": 1341546,
      "name": "에어모토2",
      "address": "서울특별시 강남구 강남로 2",
      "grade": 2,
      "distance": 5.1,
      "sentiment_score": 0.92
    },
    {
      "id": 15276534,
      "name": "에어모토3",
      "address": "서울특별시 강남구 강남로 3",
      "grade": 3,
      "distance": 6.2,
      "sentiment_score": 0.90
    }
  ]
}
```

### 디렉토리 구조화 초안



## 회고
### Keep
- 

### Problem
- 디렉토리 구조를 짜는데 시간이 오래 걸렸다 > 디렉토리 구조에 대해 어떻게 짤 지 집가서 더 고민해봐야겠다.

### Try
- 
